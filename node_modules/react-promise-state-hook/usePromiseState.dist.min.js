var i=Object.create;var o=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty;var v=e=>o(e,"__esModule",{value:!0});var f=(e,s)=>{v(e);for(var t in s)o(e,t,{get:s[t],enumerable:!0})},T=(e,s,t)=>{if(s&&typeof s=="object"||typeof s=="function")for(let u of m(s))!D.call(e,u)&&u!=="default"&&o(e,u,{get:()=>s[u],enumerable:!(t=E(s,u))||t.enumerable});return e},N=e=>T(v(o(e!=null?i(P(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);f(exports,{PromiseStatus:()=>r,createUsePromiseState:()=>S,usePromiseState:()=>c});var a=N(require("react")),r;(function(l){l[l.NOT_STARTED=0]="NOT_STARTED",l[l.PENDING=1]="PENDING",l[l.REJECTED=2]="REJECTED",l[l.FULFILLED=3]="FULFILLED"})(r||(r={}));const L=(e,s)=>s.status===1?e.status===2?{status:s.status,value:null,err:e.err}:e.status===3?{status:s.status,value:e.value,err:null}:{status:s.status,value:null,err:null}:s.status===2?{status:s.status,value:null,err:s.err}:s.status===3?{status:s.status,value:s.value,err:null}:{status:0,value:null,err:null},c=(e,{onError:s=console.error}={})=>{const t=a.useRef(!1),u=a.useRef(!0);a.useEffect(()=>()=>{u.current=!1},[]);const[l,R]=a.useReducer(L,{status:0,value:null,err:null});return[a.useCallback(async(...d)=>{if(!t.current){t.current=!0,u.current&&R({status:1,value:null,err:null});try{const n=await e(...d);u.current&&R({status:3,value:n,err:null})}catch(n){s(n),u.current&&R({status:2,value:null,err:n})}t.current=!1}},[e,s]),l]},S=e=>(s,t=e)=>c(s,t);
